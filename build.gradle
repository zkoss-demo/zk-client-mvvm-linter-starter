plugins {
    id 'application'
}

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

repositories {
    mavenCentral()
    mavenLocal()

    maven {
        name = 'ZK Repository'
        url = uri('https://mavensync.zkoss.org/maven2')
    }

    maven {
        name = 'ZK Evaluation Repository'
        url = uri('https://mavensync.zkoss.org/eval')
    }

    maven {
        name = 'ZK EE'
        url = uri('https://maven.zkoss.org/repo/zk/ee')
    }
}

dependencies {
    implementation "org.zkoss.zk:zkmax:10.0.0.FL.20230721-Eval"
    implementation "org.zkoss.zk:zklinter:10.0.0.FL.20230825-Eval"
}

tasks.register('runLinter', JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'org.zkoss.zklinter.App'
    systemProperty 'java.util.logging.config.file', './logger.properties'
}

tasks.register('listJarPaths') {
    doLast {
        println configurations.runtimeClasspath
                .findAll { it.name.endsWith('.jar') }
                .collect { it.absolutePath }.join(',')
    }
}